# Render Blueprint Configuration
# Corrected: PostgreSQL in databases section, not services

databases:
  - name: budgetapp-db
    databaseName: budgetapp
    user: budgetapp
    plan: free

services:
  - type: web
    name: budgetapp
    runtime: docker
    plan: free
    dockerfilePath: ./Dockerfile
    envVars:
      - key: DB_DRIVER
        value: org.postgresql.Driver
      - key: DB_DIALECT
        value: org.hibernate.dialect.PostgreSQL95Dialect
      - key: DB_HOST
        fromDatabase:
          name: budgetapp-db
          property: host
      - key: DB_PORT
        fromDatabase:
          name: budgetapp-db
          property: port
      - key: DB_NAME
        fromDatabase:
          name: budgetapp-db
          property: databaseName
      - key: DB_USERNAME
        fromDatabase:
          name: budgetapp-db
          property: user
      - key: DB_PASSWORD
        fromDatabase:
          name: budgetapp-db
          property: password
      - key: DB_VALIDATE_QUERY
        value: SELECT 1
      - key: JAVA_OPTS
        value: -Xmx400m -Xms200m
